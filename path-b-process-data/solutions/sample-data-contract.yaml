# Sample Data Contract Solution

This file demonstrates a comprehensive OpenAPI data contract for customer onboarding, extracted from policy requirements and designed to enforce business rules through technical validation.

## Complete OpenAPI Schema

```yaml
openapi: 3.0.3
info:
  title: Customer Onboarding Data Contract
  description: |
    Comprehensive data contract for customer identity verification and account opening.
    Implements requirements from Customer Onboarding & Identity Verification Policy COP-2024-017.
    
    Ensures compliance with:
    - Bank Secrecy Act (BSA) customer identification requirements
    - USA PATRIOT Act Section 326 verification procedures
    - FINRA Rule 4512 customer account information standards
    - OFAC sanctions screening requirements
  version: 2.1.0
  contact:
    name: Systems Analysis Team
    email: systems-analysis@example.com

servers:
  - url: https://api.example.com/v1
    description: Production environment
  - url: https://staging-api.example.com/v1
    description: Staging environment

paths:
  /customers/applications:
    post:
      summary: Submit customer onboarding application
      description: |
        Submit a complete customer application for identity verification and account opening.
        Triggers automated verification workflow with manual review fallback.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerApplication'
            examples:
              standardCustomer:
                $ref: '#/components/examples/StandardCustomerExample'
              edgeCaseCustomer:
                $ref: '#/components/examples/EdgeCaseCustomerExample'
      responses:
        '201':
          description: Application submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
        '422':
          description: Business rule violation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessRuleErrorResponse'

components:
  schemas:
    CustomerApplication:
      type: object
      description: Complete customer application for new account opening
      required:
        - personalInfo
        - contactInfo
        - identification
        - accountDetails
        - disclosures
      properties:
        personalInfo:
          $ref: '#/components/schemas/PersonalInformation'
        contactInfo:
          $ref: '#/components/schemas/ContactInformation'
        identification:
          $ref: '#/components/schemas/IdentificationDocument'
        accountDetails:
          $ref: '#/components/schemas/AccountDetails'
        employmentInfo:
          $ref: '#/components/schemas/EmploymentInformation'
        disclosures:
          $ref: '#/components/schemas/CustomerDisclosures'
        additionalInfo:
          type: string
          maxLength: 500
          description: Optional additional information or special circumstances
          example: "Customer has previous banking relationship from 2019-2021"

    PersonalInformation:
      type: object
      description: Personal identification information required for BSA/CIP compliance
      required: 
        - firstName
        - lastName
        - dateOfBirth
        - socialSecurityNumber
        - citizenship
      properties:
        firstName:
          type: string
          minLength: 1
          maxLength: 50
          pattern: '^[A-Za-z\s\-\.\']+$'
          description: Customer's legal first name as appears on government ID
          example: "Alice"
        middleName:
          type: string
          maxLength: 50
          pattern: '^[A-Za-z\s\-\.\']*$'
          description: Customer's middle name or initial (optional)
          example: "Marie"
        lastName:
          type: string
          minLength: 1
          maxLength: 50
          pattern: '^[A-Za-z\s\-\.\']+$'
          description: Customer's legal last name as appears on government ID
          example: "Anderson"
        suffix:
          type: string
          maxLength: 10
          pattern: '^(Jr|Sr|II|III|IV|V)?\.?$'
          description: Name suffix (Jr, Sr, II, III, etc.)
          example: "Jr"
        dateOfBirth:
          type: string
          format: date
          description: |
            Customer's date of birth in YYYY-MM-DD format.
            Must result in age 18 or older per policy requirement.
          example: "1985-03-15"
        socialSecurityNumber:
          type: string
          pattern: '^[0-9]{3}-[0-9]{2}-[0-9]{4}$'
          description: |
            Social Security Number in XXX-XX-XXXX format.
            Required for U.S. persons per PATRIOT Act Section 326.
          example: "123-45-6789"
        citizenship:
          type: string
          enum: 
            - us_citizen
            - permanent_resident
            - visa_holder
          description: Customer's citizenship or legal status in the United States
          example: "us_citizen"

    ContactInformation:
      type: object
      description: Contact information for customer communication and address verification
      required:
        - primaryAddress
        - phoneNumber
        - emailAddress
      properties:
        primaryAddress:
          $ref: '#/components/schemas/Address'
        mailingAddress:
          allOf:
            - $ref: '#/components/schemas/Address'
            - description: Mailing address if different from primary (optional)
        phoneNumber:
          type: string
          pattern: '^(\+1|1)?[-.\s]?(\([0-9]{3}\)|[0-9]{3})[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}$'
          description: Primary phone number in US format
          example: "(214) 555-0123"
        alternatePhoneNumber:
          type: string
          pattern: '^(\+1|1)?[-.\s]?(\([0-9]{3}\)|[0-9]{3})[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}$'
          description: Alternate or mobile phone number (optional)
          example: "214-555-0124"
        emailAddress:
          type: string
          format: email
          maxLength: 100
          description: Primary email address for account notifications
          example: "alice.anderson@example.com"

    Address:
      type: object
      description: U.S. address with USPS standardization validation
      required:
        - street
        - city
        - state
        - zipCode
      properties:
        street:
          type: string
          minLength: 5
          maxLength: 100
          description: Street address including number, name, and unit if applicable
          example: "123 Main Street, Apt 2B"
        city:
          type: string
          minLength: 2
          maxLength: 50
          pattern: '^[A-Za-z\s\-\.\']+$'
          description: City name
          example: "Dallas"
        state:
          type: string
          pattern: '^[A-Z]{2}$'
          description: Two-letter state abbreviation (uppercase)
          example: "TX"
        zipCode:
          type: string
          pattern: '^[0-9]{5}(-[0-9]{4})?$'
          description: 5-digit or 9-digit ZIP code
          example: "75201"
        country:
          type: string
          enum: ["US"]
          default: "US"
          description: Country code (currently supports US only)

    IdentificationDocument:
      type: object
      description: Government-issued identification document per PATRIOT Act requirements
      required:
        - documentType
        - documentNumber
        - issueDate
        - expirationDate
        - issuingState
      properties:
        documentType:
          type: string
          enum:
            - drivers_license
            - state_id
            - passport
            - military_id
          description: Type of government-issued photo identification
          example: "drivers_license"
        documentNumber:
          type: string
          minLength: 5
          maxLength: 25
          pattern: '^[A-Za-z0-9\-]+$'
          description: Unique document identification number
          example: "DL123456789"
        issueDate:
          type: string
          format: date
          description: Date the identification document was issued
          example: "2020-03-15"
        expirationDate:
          type: string
          format: date
          description: |
            Document expiration date (must be future date).
            System validates document is not expired.
          example: "2025-03-15"
        issuingState:
          type: string
          pattern: '^[A-Z]{2}$'
          description: State that issued the identification document
          example: "TX"
        issuingCountry:
          type: string
          enum: ["US"]
          default: "US"
          description: Country that issued the document (US only currently)

    AccountDetails:
      type: object
      description: Account opening details and initial funding information
      required:
        - accountType
        - initialDeposit
        - fundingSource
        - intendedUse
      properties:
        accountType:
          type: string
          enum:
            - checking
            - savings
            - money_market
            - certificate_deposit
          description: Type of account being opened
          example: "checking"
        accountSubType:
          type: string
          enum:
            - individual
            - joint
            - business
            - trust
          description: Account ownership structure
          example: "individual"
        initialDeposit:
          type: number
          multipleOf: 0.01
          minimum: 25.00
          maximum: 10000.00
          description: |
            Initial deposit amount in USD.
            Minimum $25.00, maximum $10,000 for new customer relationships per policy.
          example: 500.00
        fundingSource:
          type: string
          enum:
            - external_bank_transfer
            - check_deposit
            - cash_deposit
            - wire_transfer
            - money_order
          description: Method for funding the initial deposit
          example: "external_bank_transfer"
        intendedUse:
          type: string
          maxLength: 200
          description: |
            Customer's intended use of the account.
            Required for BSA compliance and risk assessment.
          example: "Personal banking, bill payments, and direct deposit"
        expectedMonthlyActivity:
          type: string
          enum:
            - low
            - moderate
            - high
          description: Expected transaction volume per month
          example: "moderate"

    EmploymentInformation:
      type: object
      description: Employment and income information for underwriting and compliance
      properties:
        employmentStatus:
          type: string
          enum:
            - employed
            - self_employed
            - unemployed
            - retired
            - student
            - homemaker
          description: Current employment status
          example: "employed"
        employerName:
          type: string
          maxLength: 100
          description: Name of current employer or business
          example: "ABC Corporation"
        jobTitle:
          type: string
          maxLength: 100
          description: Current job title or position
          example: "Software Engineer"
        workPhoneNumber:
          type: string
          pattern: '^(\+1|1)?[-.\s]?(\([0-9]{3}\)|[0-9]{3})[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}$'
          description: Work phone number for verification (optional)
          example: "(214) 555-0100"
        annualIncome:
          type: number
          multipleOf: 0.01
          minimum: 0
          maximum: 10000000
          description: |
            Annual gross income in USD.
            Used for risk assessment and account limit determination.
          example: 75000.00
        employmentStartDate:
          type: string
          format: date
          description: Start date with current employer
          example: "2022-01-15"
        employerAddress:
          $ref: '#/components/schemas/Address'

    CustomerDisclosures:
      type: object
      description: Required regulatory disclosures and customer consents
      required:
        - patriotActConsent
        - privacyPolicyConsent
        - termsOfServiceConsent
        - electronicDisclosureConsent
      properties:
        patriotActConsent:
          type: boolean
          description: |
            Customer acknowledges PATRIOT Act requirements for identity verification.
            Required by federal law - must be true to proceed.
          example: true
        privacyPolicyConsent:
          type: boolean
          description: Customer accepts current privacy policy
          example: true
        termsOfServiceConsent:
          type: boolean
          description: Customer accepts current terms of service
          example: true
        electronicDisclosureConsent:
          type: boolean
          description: Customer consents to electronic delivery of disclosures
          example: true
        marketingOptIn:
          type: boolean
          description: |
            Customer opts in to marketing communications (optional).
            Default false to comply with opt-in requirements.
          default: false
          example: false
        consentTimestamp:
          type: string
          format: date-time
          description: When disclosures were presented and accepted
          example: "2024-03-15T14:30:00Z"
        ipAddress:
          type: string
          format: ipv4
          description: Customer's IP address when consents were given (for audit)
          example: "192.168.1.100"

    ApplicationResponse:
      type: object
      description: Response after successful application submission
      properties:
        applicationId:
          type: string
          pattern: '^APP-[0-9]{8}$'
          description: Unique application identifier for tracking
          example: "APP-12345678"
        status:
          type: string
          enum:
            - submitted
            - under_review
            - approved
            - rejected
            - more_info_needed
          description: Current application processing status
          example: "under_review"
        submissionTimestamp:
          type: string
          format: date-time
          description: When the application was submitted
          example: "2024-03-15T14:30:00Z"
        estimatedDecisionTime:
          type: string
          description: Expected timeframe for decision
          example: "Within 24 hours for manual review cases"
        nextSteps:
          type: array
          items:
            type: string
          description: What happens next in the process
          example: 
            - "Identity verification in progress"
            - "You will receive email updates"
            - "Check application status online"

    ValidationErrorResponse:
      type: object
      description: Detailed validation error information
      properties:
        errorCode:
          type: string
          description: Machine-readable error code
          example: "VALIDATION_FAILED"
        message:
          type: string
          description: Human-readable error summary
          example: "One or more required fields are missing or invalid"
        fieldErrors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                description: JSON path to the field with error
                example: "personalInfo.socialSecurityNumber"
              code:
                type: string
                description: Specific error code for this field
                example: "INVALID_FORMAT"
              message:
                type: string
                description: User-friendly error message
                example: "Social Security Number must be in format XXX-XX-XXXX"
              rejectedValue:
                type: string
                description: The value that was rejected (sanitized)
                example: "123456789"

    BusinessRuleErrorResponse:
      type: object
      description: Business rule violation error
      properties:
        errorCode:
          type: string
          description: Business rule error code
          example: "AGE_REQUIREMENT_NOT_MET"
        message:
          type: string
          description: Business rule violation description
          example: "Customer must be at least 18 years old to open an account"
        policyReference:
          type: string
          description: Reference to policy section
          example: "COP-2024-017 Section 1: Initial Business Rules"
        supportContact:
          type: string
          description: How to get help with this requirement
          example: "Call 1-800-555-0123 for assistance"

  examples:
    StandardCustomerExample:
      summary: Standard individual customer application
      description: Typical checking account application with standard data
      value:
        personalInfo:
          firstName: "Alice"
          middleName: "Marie"
          lastName: "Anderson"
          dateOfBirth: "1985-03-15"
          socialSecurityNumber: "123-45-6789"
          citizenship: "us_citizen"
        contactInfo:
          primaryAddress:
            street: "123 Main Street, Apt 2B"
            city: "Dallas"
            state: "TX"
            zipCode: "75201"
          phoneNumber: "(214) 555-0123"
          emailAddress: "alice.anderson.test@example.com"
        identification:
          documentType: "drivers_license"
          documentNumber: "DL123456789"
          issueDate: "2020-03-15"
          expirationDate: "2025-03-15"
          issuingState: "TX"
        accountDetails:
          accountType: "checking"
          accountSubType: "individual"
          initialDeposit: 500.00
          fundingSource: "external_bank_transfer"
          intendedUse: "Personal banking and bill payments"
          expectedMonthlyActivity: "moderate"
        employmentInfo:
          employmentStatus: "employed"
          employerName: "ABC Corporation"
          jobTitle: "Software Engineer"
          annualIncome: 75000.00
          employmentStartDate: "2022-01-15"
        disclosures:
          patriotActConsent: true
          privacyPolicyConsent: true
          termsOfServiceConsent: true
          electronicDisclosureConsent: true
          marketingOptIn: false

    EdgeCaseCustomerExample:
      summary: Edge case customer (minimum age and deposit)
      description: Customer exactly 18 years old with minimum deposit
      value:
        personalInfo:
          firstName: "Bob"
          lastName: "Baker"
          dateOfBirth: "2006-01-01"
          socialSecurityNumber: "987-65-4321"
          citizenship: "us_citizen"
        contactInfo:
          primaryAddress:
            street: "456 Oak Avenue"
            city: "Austin"
            state: "TX"
            zipCode: "78701"
          phoneNumber: "512-555-0987"
          emailAddress: "bob.baker.test@example.com"
        identification:
          documentType: "state_id"
          documentNumber: "ID987654321"
          issueDate: "2024-01-02"
          expirationDate: "2030-01-01"
          issuingState: "TX"
        accountDetails:
          accountType: "savings"
          accountSubType: "individual"
          initialDeposit: 25.00
          fundingSource: "cash_deposit"
          intendedUse: "Savings for college expenses"
          expectedMonthlyActivity: "low"
        employmentInfo:
          employmentStatus: "student"
          annualIncome: 5000.00
        disclosures:
          patriotActConsent: true
          privacyPolicyConsent: true
          termsOfServiceConsent: true
          electronicDisclosureConsent: true
          marketingOptIn: false
```

## Quality Commentary

### What Makes This Data Contract Exceptional

**1. Comprehensive Business Rule Enforcement**
- **Age Validation:** Date of birth must result in 18+ years (policy requirement)
- **Deposit Limits:** $25 minimum, $10,000 maximum for new customers
- **Format Validation:** SSN, phone, email patterns match real-world usage
- **Document Validation:** Expiration dates must be in future

**2. Regulatory Compliance Integration**
- **PATRIOT Act:** Required fields for customer identification program
- **BSA Requirements:** Employment and income data for risk assessment
- **FINRA Standards:** Account information and disclosure requirements
- **Audit Trail:** IP address and timestamp tracking for compliance

**3. Real-World Data Handling**
- **Name Patterns:** Support hyphens, apostrophes, spaces in names
- **Address Flexibility:** Accommodates apartments, suites, and complex addresses
- **Phone Formats:** Multiple valid US phone number formats
- **International Considerations:** Structured to add international support later

**4. Developer-Friendly Design**
- **Clear Examples:** Multiple realistic customer scenarios
- **Comprehensive Errors:** Specific field-level error messages
- **Proper Nesting:** Logical grouping of related fields
- **Consistent Patterns:** Standardized validation and formatting

### Business Value Delivered

**For Compliance Teams:**
- Built-in regulatory requirement enforcement
- Audit trail generation for customer consent
- Policy reference mapping for each business rule
- Clear documentation of data collection purposes

**For Development Teams:**
- Complete API specification ready for implementation
- Comprehensive validation rules prevent invalid data
- Clear error handling with specific user guidance
- Realistic test data for development and testing

**For Business Stakeholders:**
- Translates policy requirements into enforceable technical rules
- Ensures consistent customer data collection
- Supports business process automation
- Enables regulatory reporting and compliance

### Data Quality and Validation Design

**1. Progressive Validation**
- **Format Validation:** Basic pattern and length checks first
- **Business Rule Validation:** Policy requirements enforced second
- **Cross-Field Validation:** Consistency checks between related fields
- **External Validation:** Integration with verification services

**2. Error Prevention Strategy**
- **Clear Field Descriptions:** Explain what's expected
- **Realistic Examples:** Show correct format for each field
- **Specific Error Messages:** Guide users to correct problems
- **Helpful Patterns:** Support common data variations

**3. Compliance-First Approach**
- **Required Fields:** Based on regulatory requirements, not convenience
- **Consent Tracking:** Detailed audit trail for customer agreements
- **Data Retention:** Classification for appropriate storage periods
- **Privacy Protection:** Structured to support data privacy requirements

## Integration with Process Flow

### Data Collection Points
This schema maps to specific points in the process flowchart:
- **Initial Application:** PersonalInformation, ContactInformation collected
- **Document Upload:** IdentificationDocument data captured via OCR
- **Account Setup:** AccountDetails and EmploymentInformation gathered
- **Compliance:** CustomerDisclosures presented and recorded

### Validation Timing
Different validation occurs at different process steps:
- **Format Validation:** Immediate client-side validation during data entry
- **Business Rules:** Server-side validation before external service calls
- **Identity Verification:** Cross-reference with third-party verification results
- **Final Review:** Human validation for edge cases and exceptions

### Decision Data
The schema provides data needed for process decisions:
- **Age Calculation:** From dateOfBirth for 18+ requirement
- **Risk Assessment:** From annualIncome, expectedMonthlyActivity, accountType
- **Compliance Scoring:** From citizenship, employmentStatus, intendedUse
- **Verification Confidence:** Cross-reference with external service responses

## Testing and Quality Assurance

### Test Data Strategy
The included examples demonstrate:
- **Standard Case:** Typical customer with normal data patterns
- **Edge Case:** Boundary conditions (minimum age, minimum deposit)
- **Complex Case:** Multiple addresses, employment variations
- **Error Cases:** Invalid formats, business rule violations

### Validation Testing
Each validation rule can be tested:
```yaml
# Age requirement testing
dateOfBirth: "2006-12-31"  # Exactly 18 on test date
dateOfBirth: "2007-01-01"  # Under 18 - should fail

# Deposit limit testing  
initialDeposit: 25.00      # Minimum valid
initialDeposit: 24.99      # Below minimum - should fail
initialDeposit: 10000.00   # Maximum valid
initialDeposit: 10000.01   # Above maximum - should fail
```

### Error Scenario Coverage
The error schemas support comprehensive testing:
- **Validation Errors:** Field format and constraint violations
- **Business Rule Errors:** Policy requirement violations
- **System Errors:** Service failures and integration issues
- **Security Errors:** Authentication and authorization failures

## Regulatory Compliance Evidence

### PATRIOT Act Section 326 Compliance
- Required customer identification information collected
- Government-issued ID document details captured
- Verification procedures supported by data structure
- Record retention requirements embedded in schema design

### Bank Secrecy Act Compliance
- Customer identification program data elements included
- Risk assessment information (income, employment, account use) captured
- Enhanced due diligence data collection supported
- Suspicious activity reporting data available

### Data Privacy Compliance
- Explicit consent tracking for each disclosure type
- Timestamp and IP address audit trail
- Structured for data subject access requests
- Designed to support data retention and deletion policies

This data contract provides a solid foundation for implementing the customer onboarding process while ensuring regulatory compliance and supporting business process automation.